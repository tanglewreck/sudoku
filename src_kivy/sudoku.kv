#:kivy 2.0.3
#:import random random
#:import string string
#:import sudoku sudoku

<BoardButton>:
    canvas.after:
        Color:
            rgba: .2, .2, .2, 0
        Rectangle:
            pos: self.pos
            size: self.size
    padding: 20
    font_size: '16sp'
    bold: True

<CustomLabel>:
    canvas.after:
        Color:
            rgba: .2, .2, .2, 0.5
        Rectangle:
            pos: self.pos
            size: self.size
    padding: 20
    halign: 'right'
    font_size: '14sp'
    bold: False
    markup: True
    # on_ref_press: sudoku.SudokuWidgets.update_label_text(self, 's11', "10") 
    # on_ref_press: self.text = root.active_number.text

<NumberPadButton>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    # on_press: root.update_active_number(self.text)


<SudokuWidgets>:
    # canvas.after:
    # canvas.before:
    canvas.before:
        Color:
            # rgba: 0.5,0.5,0.5,.75
            rgb: 0.3, 0.3, 0.3
        Rectangle:
            pos: self.pos
            size: self.size
    # canvas.after:
    #    Line:
    #        circle: 150, 150, 50, 90, 180
    orientation: 'horizontal'
    opacity: 1
    # padding: Padding between layout box and children: [padding_left, padding_top, padding_right, padding_bottom].
    # padding: (50, 50, 50, 50)
    # padding: (0, 0.1, 0, 0.1)
    padding: '20sp'
    # rows: 1
    # pos_hint: {'center_x': 0.45, 'center_y': 0.8}
    # pos_hint: {'center_x': 0.5, 'center_y': 0.75}
    # spacing: 100
    # size_hint: (None, None)
    # width: 600
    # height: 800
    # size_hint_y: None
    # height: 700 
    # width: 700 
    # background: (1,1,1,1) ???
    # border: 1 ???
    # border_color: "white" ???

    # Sudoku board (9x9)
    GridLayout:
        # canvas.after:
        # canvas.before:
        canvas:
            Color:
                rgba: 0.05,0,0,0.1
                # rgb: 0,0,0
            Rectangle:
                size: self.size
                pos: self.pos
        cols: 9
        rows: 9
        spacing: 10
        # pos_hint: {'center_x': 1}
        size_hint: 0.5, 1
        padding: 60,50,50,50
        # size_hint_x: 0.5
        # size_hint_y: 0.5
        # pos_hint: {'y': 0}
        # height: 400
        # width: 600
        # col_force_default: True
        # col_default_width: 50
        # cols_minimum['0']: 500
        # padding: 10
        # row_force_default: True
        # row_default_height: 50

        # Row 1
        BoardButton:
            id: s11
            on_press: self.text = active_number.text
            # on_press: root.update_label_text('s11', active_number.text)
            # on_ref_press: self.text = active_number.text
            # text: "[ref=footext][color=aabbaa]Label[/color][color=ff3333][sub]with[/sub][/color][color=3333ff][b]mark[sup]up[/sup][/b][/color][/ref]"
            # padding: 0, 0, 0, 0
        BoardButton:
            id: s12
            on_press: self.text = active_number.text
            # text: "[ref=foo_ref]0[/ref]"
            # markup: True
            # on_ref_press: self.text = active_number.text
        BoardButton:
            id: s13
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s14
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s15
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s16
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s17
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s18
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s19
            text: ""
            on_press: self.text = active_number.text
        #
        # Row 2
        BoardButton:
            id: s21
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s22
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s23
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s24
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s25
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s26
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s27
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s28
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s29
            text: ""
            on_press: self.text = active_number.text
        #
        # Row 3
        BoardButton:
            id: s31
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s32
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s33
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s34
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s35
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s36
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s37
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s38
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s39
            text: ""
            on_press: self.text = active_number.text
        #
        # Row 4
        BoardButton:
            id: s41
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s42
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s43
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s44
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s45
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s46
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s47
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s48
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s49
            text: ""
            on_press: self.text = active_number.text
        #
        # Row 5
        BoardButton:
            id: s51
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s52
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s53
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s54
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s55
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s56
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s57
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s58
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s59
            text: ""
            on_press: self.text = active_number.text
        #
        # Row 6
        BoardButton:
            id: s61
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s62
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s63
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s64
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s65
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s66
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s67
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s68
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s69
            text: ""
            on_press: self.text = active_number.text
        #
        # Row 7
        BoardButton:
            id: s71
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s72
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s73
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s74
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s75
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s76
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s77
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s78
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s79
            text: ""
            on_press: self.text = active_number.text
        #
        # Row 8
        BoardButton:
            id: s81
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s82
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s83
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s84
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s85
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s86
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s87
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s88
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s89
            text: ""
            on_press: self.text = active_number.text
        # 
        # Row 9
        BoardButton:
            id: s91
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s92
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s93
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s94
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s95
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s96
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s97
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s98
            text: ""
            on_press: self.text = active_number.text
        BoardButton:
            id: s99
            text: ""
            on_press: self.text = active_number.text


    BoxLayout:
        orientation: 'vertical'
        size_hint: 0.25, 1
        padding: 50, 200, 0, 0
        # width: '500sp'
        # padding: 200, 0, 0, 0
        # padding: '0sp', '20sp', 0, 0
        # padding: '50sp', '100sp', 0, 0
        # height: self.height
        # align: 'left'
        # valign: 'top'
    # = = = = = #
    # Numpad    #
    # = = = = = #
        GridLayout:
            cols: 3
            rows: 4
            size_hint: 1, 0.25
            spacing: '2sp'
            # width: 600
            # height:100
            # pos_hint: {'center_x': 0.65, 'y': 0}
            # pos_hint: {'x': 0.4, 'center_y': 0.5}
            # size_hint_x: 1
            # size_hint_y: 0.1
            # size_hint: (1, 0.09)
    
            # col_force_default: True
            # col_default_width: 220
            # row_force_default: True
            # row_default_height: 66.666
    
            NumberPadButton:
                id: b1
                text: "1"
                on_press: active_number.text = "1"
                # on_press: root.update_active_number("1")
            NumberPadButton:
                id: b2
                text: "2"
                # on_press: active_number.text = "2"
                on_press: root.update_active_number(self.text)
            NumberPadButton:
                id: b3
                text: "3"
                on_press: active_number.text = "3"
            NumberPadButton:
                id: b4
                text: "4"
                on_press: active_number.text = "4"
            NumberPadButton:
                id: b5
                text: "5"
                on_press: active_number.text = "5"
            NumberPadButton:
                id: b6
                text: "6"
                on_press: active_number.text = "6"
            NumberPadButton:
                id: b7
                text: "7"
                on_press: active_number.text = "7"
            NumberPadButton:
                id: b8
                text: "8"
                on_press: active_number.text = "8"
            NumberPadButton:
                id: b9
                text: "9"
                on_press: active_number.text = "9"
            # Button:
            #    canvas.after:
            #        Color:
            #            rgb: 0.3,0.3,0.3
            #        Rectangle:
            #            pos: self.pos
            #            size: self.size
            #    text: ""

            NumberPadButton:
                id:clear_button
                text: "X"
                pos_hint: {'center_x': 500}
                on_press: active_number.text = ""
    
        Label:
            id: active_number
            font_size: '18sp'
            markup: True
            # text: "[ref=foo]0[/ref]"
            on_ref_press: self.text = "fubar" # active_number.text
            text: "[ref=footext][color=aabbaa]Label[/color][color=ff3333][sub]with[/sub][/color][color=3333ff][b]mark[sup]up[/sup][/b][/color][/ref]"
            padding: 0, 0, 0, 0
            size_hint_y: 0.25
            # size_hint: 0.5, 0.25
            # size_hint: (None, None)
            # height: 100
            # pos_hint: {'center_x': .482}
            # pos_hint: {'center_x': .5, 'y': 0}
            # padding: '10sp'
            # padding: (0, 0, 0, 0)
        Button:
            padding: 10
            pos_hint: {'center_x': 0.55}
            size_hint: 0.85, 0.1
            markup: True
            bold: False
            text: "[i]Qu[/i]it"
            on_press: raise SystemExit(0)
            # size_hint_x: 0.15
            # size_hint_y: 0.05
            # size_hint: (None, None)
            # height: 50
            # width: 300
            # pos_hint: {'center_x': .25, 'y': 0.7}
            # pos_hint: {'y': 0, 'x':.01}
            # text: f'State is {self.state}'
            # on_release: root.do_quit()
            # size_hint_x: None
            # size_hint_y: None
            # height: 60
            # padding: 200
            # on_press: root.do_quit()
    






#    Label:
#        id: selected
#        text: "f00"
#        bold: True
#        color: [100, 100, 100, 100] 
        # size_hint_x: None
        # size_hint_y: None
        # height: 50
        #    width: 500
        # size_hint_x: None
        # width: 200
        # center_x: root.width / 2
        # center_y: root.height / 2
        # pos: root.width / 2, root.height / 2
    #Label:
    #    text: "Password"
        # size_hint_x: None
        # size_hint_y: None
        # height: 50
        # width: 100
        # size_hint_x: None
        # width: 200
    #TextInput:
    #    id: password
    #    password: True
    #    multiline: False
        # size_hint_x: None
        # size_hint_y: None
        # height: 50
        # width: 100
        # size_hint_x: None
        # width: 200
